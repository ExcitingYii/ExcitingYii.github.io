{%- assign default_paths = site.html_pages | map: 'path' -%}
{%- assign page_paths = site.header_pages | default: default_paths -%}
<header>
  <div class="menu">
    <ul>
      {%- for path in page_paths -%}
        {%- assign my_page = site.pages | where: "path", path | first -%}
        {%- if my_page.title -%}
        <li>
          <a href="{{ my_page.url | relative_url }}"{% if page.url == my_page.url %} aria-current="page"{% endif %}>{{ my_page.title | escape }}</a>
        </li>
        {%- endif -%}
      {%- endfor -%}

      <li>
        <a href="{{ site.baseurl }}/">En</a> / <a href="{{ site.baseurl }}/cn/">中</a>
      </li>
      </ul>
  </div>
  <button id="theme-toggle" style="background:none; border:none; cursor:pointer; color:inherit; font-family:inherit;">
    [Switch Theme]
  </button>
</header>

<script>
  const toggleBtn = document.getElementById('theme-toggle');
  const body = document.body;

  // 检查本地存储中是否有用户偏好
  if (localStorage.getItem('theme') === 'light') {
    body.classList.add('light-theme');
  }

  toggleBtn.addEventListener('click', () => {
    body.classList.toggle('light-theme');
    
    // 保存用户偏好
    if (body.classList.contains('light-theme')) {
      localStorage.setItem('theme', 'light');
    } else {
      localStorage.removeItem('theme');
    }
  });
</script>

<style>
  /* 假设默认是 Dark Mode (黑色背景，白色字) */
  /* 定义 Light Mode 的样式覆盖 */
  body.light-theme {
    background-color: #fdf6e3 !important; /* Solarized Light 背景 */
    color: #586e75 !important;           /* Solarized Light 文字 */
  }
  
  /* 你可能需要针对链接和代码块单独设置颜色反转 */
  body.light-theme a {
    color: #268bd2 !important;
  }
  body.light-theme pre {
    background-color: #eee8d5 !important;
    color: #657b83 !important;
  }
</style>