{%- assign default_paths = site.html_pages | map: 'path' -%}
{%- assign page_paths = site.header_pages | default: default_paths -%}
{%- assign current_lang = page.lang | default: site.lang | default: 'en' -%}
{%- assign locale_en_url = '/en/' | relative_url -%}
{%- assign locale_cn_url = '/cn/' | relative_url -%}
{%- if current_lang == 'zh' -%}
  {%- assign theme_dark_label = '暗' -%}
  {%- assign theme_light_label = '亮' -%}
{%- else -%}
  {%- assign theme_dark_label = 'dark' -%}
  {%- assign theme_light_label = 'light' -%}
{%- endif -%}
<header>
  <div class="menu">
    <ul>
      {%- for path in page_paths -%}
        {%- assign my_page = site.pages | where: "path", path | first -%}
        {%- if my_page.title -%}
        <li>
          <a href="{{ my_page.url | relative_url }}"{% if page.url == my_page.url %} aria-current="page"{% endif %}>{{ my_page.title | escape }}</a>
        </li>
        {%- endif -%}
      {%- endfor -%}

      <li class="menu-locale">
        <a href="{{ locale_en_url }}"{% if current_lang == "en" %} aria-current="page"{% endif %}>EN</a>
        <span class="menu-divider">/</span>
        <a href="{{ locale_cn_url }}"{% if current_lang == "zh" %} aria-current="page"{% endif %}>中</a>
      </li>
      <li class="menu-theme">
        <button class="theme-option" type="button" data-theme-target="dark" aria-pressed="false" title="Switch to dark mode">{{ theme_dark_label }}</button>
        <span class="menu-divider">/</span>
        <button class="theme-option" type="button" data-theme-target="light" aria-pressed="false" title="Switch to light mode">{{ theme_light_label }}</button>
      </li>
      </ul>
  </div>
</header>
